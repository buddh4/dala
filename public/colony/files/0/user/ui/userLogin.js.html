<h1>userLogin.js</h1>
<pre><code class="lang-js"><span class="keyword">var</span> event = require(<span class="string">'../../core/event'</span>);
<span class="keyword">var</span> Dialog = require(<span class="string">'./../../ui/dialog'</span>);

<span class="keyword">var</span> userManager = require(<span class="string">'../userManager'</span>);

<span class="keyword">var</span> loginDialog;

<span class="keyword">var</span> init = <span class="keyword">function</span>() {

    loginDialog = <span class="keyword">new</span> Dialog({
        dialogId : <span class="string">"#login-dialog"</span>,
        triggerId : <span class="string">"#loginButton"</span>,
        cancelButton : <span class="literal">true</span>,
        resetOnClose : <span class="literal">true</span>,
        submitLabel : <span class="string">'Login'</span>,
        submit : login
    });
}

<span class="keyword">var</span> login = <span class="keyword">function</span>() {
    userManager.login($(<span class="string">'#login_email'</span>).val(), $(<span class="string">'#login_pw'</span>).val())
        .then(<span class="keyword">function</span>(result) {
            loginDialog.close();
        }, <span class="keyword">function</span>(err) {
            loginDialog.shake();
        });
};

module.exports = {
    init: init
}</code></pre>